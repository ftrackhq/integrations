{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "$id": "http://www.ftrack.com/integrations/framework/simple-tool-schema.json",
  "title": "PublisherToolSchema",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "tool_title",
    "host_type",
    "tool_type",
    "engine_type",
    "engine_name",
    "steps"
  ],
  "properties": {
    "tool_type": {
      "type": "string",
      "default": "publisher"
    },
    "tool_title": {
      "type": "string",
      "default": null
    },
    "host_type": {
      "type": "string",
      "default": "python"
    },
    "ui_type": {
      "type": "string",
      "default": ""
    },
    "discoverable": {
      "type": "array",
      "items": {"type": "string"},
      "default": [
        "Task"
      ]
    },
    "steps": {
            "type": "array",
            "items": {
              "allOf": [
                {
                  "$ref": "memory:StepSchema"
                }
              ],
              "properties": {
                  "step_type": {
                    "type": "string",
                    "enum": [
                      "context",
                      "component",
                      "finalizer"
                    ]
                  },
                  "stages": {
                    "type": "array",
                    "uniqueItems": true,
                    "items": {
                      "properties": {
                        "stage_type": {
                          "type": "string",
                          "enum": [
                            "collector",
                            "validator",
                            "exporter",
                            "context",
                            "finalizer",
                            "pre_finalizer",
                            "post_finalizer"
                          ]
                        }
                      }
                    }
                  }
                }

            },
            "default": [],
            "minItems": 1,
            "uniqueItems": true
        },
    "engine_type": {
          "type": "string",
          "default": "publisher"
        },
    "engine_name": {
          "type": "string"
        }
  }
}

